{% load static %}

<!DOCTYPE html>
<html lang="zxx">
<head>
	<!-- Meta Tag -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name='copyright' content=''>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Title Tag  -->
    <title>Iconic Store</title>
	<!-- Favicon -->
	<link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
	<!-- Web Font -->
	<link href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
	
	<!-- StyleSheet -->
	
	<!-- Bootstrap -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
	<!-- Magnific Popup -->
    <link rel="stylesheet" href="{% static 'css/magnific-popup.min.css' %}">
	<!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'css/font-awesome.css' %}">
	<!-- Fancybox -->
	<link rel="stylesheet" href="{% static 'css/jquery.fancybox.min.css' %}">
	<!-- Themify Icons -->
    <link rel="stylesheet" href="{% static 'css/themify-icons.css' %}">
	<!-- Nice Select CSS -->
    <link rel="stylesheet" href="{% static 'css/niceselect.css' %}">
	<!-- Animate CSS -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- Flex Slider CSS -->
    <link rel="stylesheet" href="{% static 'css/flex-slider.min.css' %}">
	<!-- Owl Carousel -->
    <link rel="stylesheet" href="{% static 'css/owl-carousel.css' %}">
	<!-- Slicknav -->
    <link rel="stylesheet" href="{% static 'css/slicknav.min.css' %}">
	
	<!-- Eshop StyleSheet -->
	<link rel="stylesheet" href="{% static 'css/reset.css' %}">
	<link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">

	<!-- Color CSS -->
	<link rel="stylesheet" href="{% static 'css/color/color1.css' %}">
	<!--<link rel="stylesheet" href="{% static 'css/color/color2.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color3.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color4.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color5.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color6.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color7.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color8.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color9.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color10.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color11.css' %}">-->
	<!--<link rel="stylesheet" href="{% static 'css/color/color12.css' %}">-->

	<link rel="stylesheet" href="#" id="colors">
	
</head>
<body class="js">
	
	<!-- Preloader -->
	<div class="preloader">
		<div class="preloader-inner">
			<div class="preloader-icon">
				<span></span>
				<span></span>
			</div>
		</div>
	</div>
	<!-- End Preloader -->
	
	<!-- Eshop Color Plate -->
	<div class="color-plate ">
		<a class="color-plate-icon"><i class="ti-paint-bucket"></i></a>
		<h4>Colors</h4>
		<p>Select the color scheme.</p>
		<span class="color1"></span>
		<span class="color2"></span>
		<span class="color3"></span>
		<span class="color4"></span>
		<span class="color5"></span>
		<span class="color6"></span>
		<span class="color7"></span>
		<span class="color8"></span>
		<span class="color9"></span>
		<span class="color10"></span>
		<span class="color11"></span>
		<span class="color12"></span>
	</div>
	<!-- /End Color Plate -->
	
	<!-- Header -->
	<header class="header shop">
		<!-- Topbar -->
		<div class="topbar">
			<div class="container">
				<div class="row">
					<div class="col-lg-5 col-md-12 col-12">
						<!-- Top Left -->
						<div class="top-left">
							<ul class="list-main">
								<li><i class="ti-headphone-alt"></i> <a href="tel:+923704651911" target="_blank">+92 370 4651911</a></li>
								<li><i class="ti-email"></i> <a href="mailto:iconicsj.01@gmail.com" target="_blank">iconicsj.01@gmail.com</a></li>
							</ul>
						</div>
						<!--/ End Top Left -->
					</div>
					<div class="col-lg-7 col-md-12 col-12">
						<!-- Top Right -->
						<div class="right-content">
							<ul class="list-main">
								<li><i class="ti-location-pin"></i> Store location</li>
								<li><i class="ti-user"></i> <a href="#">My account</a></li>
                {% if request.user.is_authenticated %}
                <li><i class="ti-power-off"></i><a href="{% url 'logout_user' %}">Logout</a></li>
                {% else %}
								<li><i class="ti-power-off"></i><a href="{% url 'login_user' %}">Login</a></li>
                {% endif %}
							</ul>
						</div>
						<!-- End Top Right -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Topbar -->
		<div class="middle-inner">
			<div class="container">
				<div class="row">
					<div class="col-lg-2 col-md-2 col-12">
						<!-- Logo -->
						<div class="logo">
							<a href="{% url 'index' %}"><h3>Iconic Store</h3></a>
						</div>
						<!--/ End Logo -->
						<!-- Search Form -->
						<div class="search-top">
							<div class="top-search"><a href="#0"><i class="ti-search"></i></a></div>
							<!-- Search Form -->
							<div class="search-top">
								<form class="search-form" method="POST">
									<input type="text" placeholder="Search here..." name="item_name">
									<button value="item_name" type="submit"><i class="ti-search"></i></button>
								</form>
								<form action="{% url 'index' %}" id="categoryForm" method="get">
									<select id="category" name="category" onchange="submitForm()">
										<option selected="selected" value="all">All Category</option>
										{% for cat in category_list %}
											<option value="{{cat}}">{{cat}}</option>
										{% endfor %}
									</select>
								</form>
							</div>
							<!--/ End Search Form -->
						</div>
						<!--/ End Search Form -->
						<div class="mobile-nav"></div>
					</div>
					<div class="col-lg-8 col-md-7 col-12">
						<div class="search-bar-top">
							<div class="search-bar">
                <form action="{% url 'index' %}" id="categoryForm" method="get">
								<select id="category" name="category" onchange="submitForm()">
									<option selected="selected" value="all">All Category</option>
                  {% for cat in category_list %}
                    <option value="{{cat}}">{{cat}}</option>
                  {% endfor %}
								</select>
                </form>
								<form method="POST">
									<input name="item_name" placeholder="Search Products Here....." type="search">
									<button class="btnn" type="submit"><i class="ti-search"></i></button>
								</form>
							</div>
						</div>
					</div>
					<div class="col-lg-2 col-md-3 col-12">
						<div class="right-bar">
							<!-- Search Form -->
							<div class="sinlge-bar">
								<a href="#" class="single-icon"><i class="fa fa-heart-o" aria-hidden="true"></i></a>
							</div>
							<div class="sinlge-bar">
								<a href="#" class="single-icon"><i class="fa fa-user-circle-o" aria-hidden="true"></i></a>
							</div>
							<div class="sinlge-bar shopping">
								<a href="{% url 'cart' %}" class="single-icon"><i class="ti-bag"></i> {% if count_products %} <span class="total-count">{{count_products}}</span> {% endif %}</a>
								<!-- Shopping Item -->
								<div class="shopping-item">
									<div class="dropdown-cart-header">
										<span>{{count_products}} Items</span>
										<a href="{% url 'cart' %}">View Cart</a>
									</div>
									<ul class="shopping-list">
                    {% for id, qty, price in cart_products %}
                    {% for product in all_products %}
                    {% if product.id == id %}
										<li>
											<a href="{% url 'remove_from_cart' id=product.id %}" class="remove" title="Remove this item"><i class="fa fa-remove"></i></a>
											<a class="cart-img" href="{% url 'details' id=product.id %}"><img src="{{product.image_1.url}}" alt="#"></a>
											<h4><a href="{% url 'details' id=product.id %}">{{product.name}}</a></h4>
											<p class="quantity">{{qty}}x - <span class="amount">Rs.{{price}}.00</span></p>
										</li>
                    {% endif %}
                    {% endfor %}
                    {% endfor %}
									</ul>
									<div class="bottom">
										<div class="total">
											<span>Total</span>
											<span class="total-amount">Rs.{{gross_total}}.00</span>
										</div>
										<a href="{% url 'cart' %}" class="btn animate">Cart</a>
									</div>
								</div>
								<!--/ End Shopping Item -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Header Inner -->
		<div class="header-inner">
			<div class="container">
				<div class="cat-nav-head">
					<div class="row">
						
						<div class="col-lg-9 col-12">
							<div class="menu-area">
								<!-- Main Menu -->
								<nav class="navbar navbar-expand-lg">
									<div class="navbar-collapse">	
										<div class="nav-inner">	
											<ul class="nav main-menu menu navbar-nav">
												<li class="active"><a href="{% url 'index' %}">Home</a>
												</li>
												{% if request.user.is_authenticated %}
                                                <li><a href="{% url 'logout_user' %}">Logout</a></li>
												<li><a href="{% url 'all_prev_orders' %}">Previous Orders</a></li>
                                                {% else %}
												<li><a href="{% url 'login_user' %}">Login</a></li>
												<li><a href="{% url 'register_user' %}">Register</a></li>
                                                {% endif %}
                                                <li><a href="{% url 'about' %}">About Us</a></li>									
											</ul>
										</div>
									</div>
								</nav>
								<!--/ End Main Menu -->	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/ End Header Inner -->
	</header>
	<!--/ End Header -->
	
	
	
	<!-- Start Product Area -->
    <div class="product-area section">
            <div class="container">
				<div class="row">
					<div class="col-12">
						<div class="section-title">
              {% if search_var %}
              <h2>Result for {{search_var}}...</h2>
              {% else %}
							<h2>Trending Item</h2>
              {% endif %}
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-12">
						<div class="product-info">
							<div class="nav-main">
								<!-- Tab Nav -->
								
								<!--/ End Tab Nav -->
							</div>
							<div class="tab-content">
								<!-- Start Single Tab -->
								<!-- <div class="tab-pane fade show active" id="man" role="tabpanel"> -->
									<!-- <div class="tab-single"> -->
										<div class="row">
                      {% for product in all_products %}
											<div class="col-xl-3 col-lg-4 col-md-4 col-12">
												<div class="single-product">
													<div class="product-img">
														<a href="{% url 'details' id=product.id %}">
															<img class="default-img" src="{{product.image_1.url}}" alt="#">
															<img class="hover-img" src="{{product.image_1.url}}" alt="#">
                              {% if product.discount_percent %}
                              <span class="price-dec">{{product.discount_percent}}% Off</span>
                              {% endif %}
														</a>
														<div class="button-head">
															<div class="product-action">
																<a title="Wishlist" href="#"><i class=" ti-heart "></i><span>Add to Wishlist</span></a>
															</div>
															<div class="product-action-2">
                                <div id="product-{{ product.id }}">
                                  {% if product.id not in product_ids_list %}
                                      <a title="Add to cart" href="#" class="add-to-cart" data-id="{{ product.id }}">Add to cart</a>
                                  {% else %}
                                      <a title="Remove from cart" href="#" class="remove-from-cart" data-id="{{ product.id }}">Remove from cart</a>
                                  {% endif %}
                                </div>
															</div>
														</div>
													</div>
													<div class="product-content">
														<h3><a href="{% url 'details' id=product.id %}">{{product.name}}</a></h3>
														<div class="product-price">
                              {% if product.price_without_discount %}
                              <span class="old">Rs.{{product.price_without_discount}}.00</span>
                              {% endif %}
															<span>Rs.{{product.price}}.00</span>
														</div>
													</div>
												</div>
											</div>
                      {% endfor %}
										</div>
									<!-- </div> -->
								<!-- </div> -->
								<!--/ End Single Tab -->
								
							</div>
						</div>
					</div>
					<div class="col-12">
						<!-- Pagination -->
						<div class="pagination">
							<ul class="pagination-list">
								{% if all_products.has_previous %}
								<li><a href="?page={{ all_products.previous_page_number }}" class="btn" style="text-align: center;">{{ all_products.previous_page_number }}</a></li>
								{% endif %}

								{% if all_products.has_next %}
								<li></li><a href="?page={{ all_products.next_page_number }}" class="btn">{{ all_products.next_page_number }}</a></li>
								{% endif %}
							</ul>
						</div>
						<!--/ End Pagination -->
					</div>
				</div>
            </div>
    </div>
	<!-- End Product Area -->


	
	
	
	<!-- Start Shop Services Area -->
	<section class="shop-services section home">
		<div class="container">
			<div class="row">
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-rocket"></i>
						<h4>Fast Delivery</h4>
						<p>Within 7 Days</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-reload"></i>
						<h4>Free Return</h4>
						<p>Within 7 days returns</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-lock"></i>
						<h4>Sucure Payment</h4>
						<p>100% secure payment</p>
					</div>
					<!-- End Single Service -->
				</div>
				<div class="col-lg-3 col-md-6 col-12">
					<!-- Start Single Service -->
					<div class="single-service">
						<i class="ti-tag"></i>
						<h4>Best Price</h4>
						<p>Guaranteed price</p>
					</div>
					<!-- End Single Service -->
				</div>
			</div>
		</div>
	</section>
	<!-- End Shop Services Area -->
	
	
	
	
	
	<!-- Start Footer Area -->
	<footer class="footer">
		<!-- Footer Top -->
		<div class="footer-top section">
			<div class="container">
				<div class="row">
					<div class="col-lg-5 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer about">
							<div class="logo">
								<a href="{% url 'index' %}"><h1>Iconic Store</h1></a>
							</div>
							<p class="text"> At IconicStore, we believe that fashion is not just about what you wear, but how you feel.</p>
							<p class="call">Got Question? WhatsApp us 24/7<span><a href="https://wa.me/923704651911" target="_blank">+92 370 4651911</a></span></p>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Information</h4>
							<ul>
								<li><a href="{% url 'about' %}">About Us</a></li>
								<li><a href="mailto:iconicsj.01@gmail.com" target="_blank">Mail Us</a></li>
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-2 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer links">
							<h4>Customer Service</h4>
							<ul>
								<!-- <li><a href="#">Returns</a></li>
								<li><a href="#">Shipping</a></li>
								<li><a href="#">Privacy Policy</a></li> -->
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
					<div class="col-lg-3 col-md-6 col-12">
						<!-- Single Widget -->
						<div class="single-footer social">
							<h4>Get In Tuch</h4>
							<!-- Single Widget -->
							<div class="contact">
								<ul>
									<li>IconicStore Center Block-A Sher Shah Lahore.</li>
									<li>Punjab Pakistan</li>
									<li>iconicsj.01@gmail.com</li>
									<li>+92 370 4651911</li>
								</ul>
							</div>
							<!-- End Single Widget -->
							<ul>
								<!-- <li><a href="#"><i class="ti-facebook"></i></a></li>
								<li><a href="#"><i class="ti-twitter"></i></a></li>
								<li><a href="#"><i class="ti-flickr"></i></a></li>
								<li><a href="#"><i class="ti-instagram"></i></a></li> -->
							</ul>
						</div>
						<!-- End Single Widget -->
					</div>
				</div>
			</div>
		</div>
		<!-- End Footer Top -->
		<div class="copyright">
			<div class="container">
				<div class="inner">
					<div class="row">
						<div class="col-lg-6 col-12">
							<div class="left">
								<p>&copy; <span id="displayYear"></span> <a href="{% url 'index' %}">Iconic Store</a>  -  All Rights Reserved.</p>
							</div>
						</div>
						<div class="col-lg-6 col-12">
							<div class="right">
								<img src="{% static 'images/payments.png' %}" alt="#">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- /End Footer Area -->
 
	<!-- Jquery -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/jquery-migrate-3.0.0.js' %}"></script>
	<script src="{% static 'js/jquery-ui.min.js' %}"></script>
	<!-- Popper JS -->
	<script src="{% static 'js/popper.min.js' %}"></script>
	<!-- Bootstrap JS -->
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<!-- Color JS -->
	<script src="{% static 'js/colors.js' %}"></script>
	<!-- Slicknav JS -->
	<script src="{% static 'js/slicknav.min.js' %}"></script>
	<!-- Owl Carousel JS -->
	<script src="{% static 'js/owl-carousel.js' %}"></script>
	<!-- Magnific Popup JS -->
	<script src="{% static 'js/magnific-popup.js' %}"></script>
	<!-- Waypoints JS -->
	<script src="{% static 'js/waypoints.min.js' %}"></script>
	<!-- Countdown JS -->
	<script src="{% static 'js/finalcountdown.min.js' %}"></script>
	<!-- Nice Select JS -->
	<script src="{% static 'js/nicesellect.js' %}"></script>
	<!-- Flex Slider JS -->
	<script src="{% static 'js/flex-slider.js' %}"></script>
	<!-- ScrollUp JS -->
	<script src="{% static 'js/scrollup.js' %}"></script>
	<!-- Onepage Nav JS -->
	<script src="{% static 'js/onepage-nav.min.js' %}"></script>
	<!-- Easing JS -->
	<script src="{% static 'js/easing.js' %}"></script>
	<!-- Active JS -->
	<script src="{% static 'js/active.js' %}"></script>
  <!-- Same Page JS -->
	<script src="{% static 'js/same_locaion_page.js' %}"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    $(document).ready(function() {
        $('.add-to-cart').click(function(event) {
            event.preventDefault();
            var productId = $(this).data('id');
            var url = "{% url 'add_to_cart' 0 %}".replace('0', productId);
            var link = $(this);
    
            $.get(url, function(data) {
                if (data.success) {
                    window.location.reload(); // Reload the page after adding to cart
                }
            });
        });
    
        $(document).on('click', '.remove-from-cart', function(event) {
            event.preventDefault();
            var productId = $(this).data('id');
            var url = "{% url 'remove_from_cart' 0 %}".replace('0', productId);
            var link = $(this);
    
            $.get(url, function(data) {
                if (data.success) {
                    window.location.reload(); // Reload the page after removing from cart
                }
            });
        });
    });
    </script>

  <script>
    function submitForm() {
      document.getElementById('categoryForm').submit();
    }
  </script>
</body>
</html>